{% extends 'accounts/main.html' %}
{% block content %}

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar shadow-sm">
            <div class="sidebar-sticky px-3 py-4">
                <h5 class="text-dark fw-bold mb-4">📊 Sales Panel</h5>
                <ul class="nav flex-column">
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'sales-dashboard' %}">🏠 Dashboard</a>
                    </li>
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'manage_customers' %}">👥 My Customers</a>
                    </li>
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'monitor_quotes' %}">📦 Active Orders</a>
                    </li>
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'track_orders' %}">📝 Quote Requests</a>
                    </li>
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'release_projects' %}">✅ Released Projects</a>
                    </li>
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'follow_up_payments' %}">💳 Follow Up</a>
                    </li>
                    <li class="nav-item mb-2">
                        <a class="nav-link" href="{% url 'communicate_designers_admins' %}">📥 Messages</a>
                    </li>
                    
                    
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
            <h2 class="mb-4">👨‍💼 Sales Representative Dashboard</h2>

            <!-- Overview Cards -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card text-white bg-primary shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Customers</h5>
                            <p class="card-text fs-4">{{ customers_count }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-white bg-warning shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Quote Requests</h5>
                            <p class="card-text fs-4">{{ quote_requests_count }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-white bg-success shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Active Orders</h5>
                            <p class="card-text fs-4">{{ active_orders_count }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-white bg-info shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Released Projects</h5>
                            <p class="card-text fs-4">{{ released_projects_count }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Orders -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-dark text-white">
                    Recent Orders
                </div>
                <div class="card-body table-responsive">
                    <table class="table table-hover align-middle">
                        <thead class="table-light">
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in recent_orders %}
                                <tr>
                                    <td>#{{ order.id }}</td>
                                    <td>{{ order.customer.name }}</td>
                                    <td>
                                        {% if order.status == "Completed" %}
                                            <span class="badge bg-success">{{ order.status }}</span>
                                        {% elif order.status == "Pending" %}
                                            <span class="badge bg-warning">{{ order.status }}</span>
                                        {% else %}
                                            <span class="badge bg-secondary">{{ order.status }}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ order.date_created|date:"M d, Y" }}</td>
                                    <td>
                                        <a href="{% url 'sales_order_detail' order.id %}" class="btn btn-sm btn-outline-primary">View</a>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="5" class="text-center text-muted">No recent orders available.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>
</div>

{% endblock %}
